{% extends "base.html" %}
{% block content %}
<!--
  
    <img class="hero-image" src="{{url_for ('static', filename='images/background-image-1.jpg')}}" alt="smoothies collection">
  -->
<div class="container-fluid">
  <!--Hero Image -->
  <section id="hero-image"> 
    <div class="row">
      <!--Search Box-->
      <div class="col s12 m8 l6  center-align form-content">
        <form action="{{ url_for('regex') }}" method="post">
          <div class="row search-margin-bottom ">
            <div class="col s11 input-field">
              <i class="fas fa-search prefix"></i>
              <input type="text" name="query" id="query" minlenght="3" class="validate" required>
              <label for="query">Search for recipes by ingredients</label>
            </div>
          </div>
          <div class="col s12 search-button-margin">
            <a href="{{ url_for('get_recipes') }}" class="btn-small remove-list-item">Reset</a>
            <button type="submit" class="btn-small add-list-item">
               Search
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
  </section>
  <section>
  <!-- Searching for recipes by ingredient-->
  <div class="container">
  
    <h1 class="center-align">All Recipes</h1>
    
    <div class="row ">
      {% if recipes|length > 0 %}
      <!-- Recipe Image & Recipe Name-->
      {% for recipe in recipes %}
      <div class="col s12 m6 l4 xl3 ">
        <div class="cards ">
        <div class="card hoverable">
          <div class="card-image">
          {% if recipe.image_url %}
          <img class="single-recipe-image" src="{{ recipe.image_url }}" alt="{{ recipe.name }}" />
          {% else %}
            <img class="single-recipe-image" src="{{ url_for('static', filename='images/image-replacement.jpg') }}"
            alt="Replacement image" />
          {% endif %}
          <a href="{{ url_for('recipe', recipe_id=recipe._id) }}" 
            class="btn-floating tooltipped remove-list-item pulse halfway-fab see-recipe-font" 
            data-position="top" data-tooltip="See The Recipe">
            <i class="fas fa-eye"></i>
          </a>
        </div>
        <div class="card-content">
          <span class="card-title center-align">
            <h3 class="title-font">{{ recipe.name }}</h3>
          </span>
         
            <!-- Recipe Serves, Calories Per Serving, Category, Added By -->
            <p class="center-align">
              <i class="fas fa-users tooltipped" data-position="left" data-tooltip="Serves"></i> {{ recipe.serves }} |
              <i class="fas fa-fire tooltipped" data-position="right" data-tooltip="Calories per serve"></i>
              {{ recipe.calories }}
            </p>
            <p class="category-font">
              Category: {{ recipe.category_name }}
            </p>
            <p class="right-align added-font">
              <em>Added by: {{ recipe.added_by }}</em>
            </p>
          </div>
          <div class="card-action center-align">
           <!-- <a href="{{ url_for('recipe', recipe_id=recipe._id) }}" class="see-recipe-font">See Recipe</a>-->
            {% if session.user|lower == recipe.added_by|lower %}
            <a href="{{ url_for('delete_recipe', recipe_id=recipe._id)}}"
              class="btn-small remove-list-item ">Delete</a>
            <a href="{{ url_for('edit_recipe', recipe_id=recipe._id)}}" class="btn-small add-list-item  ">Edit</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
      {% endfor %}
    </div>
    {% else %}
    <h5 class="center-align no-ingredient-found"> No Recipes Found With The Selected Ingredient</h5>
      <p class="center-align no-recipe-found">Feel free to register for one here
        <strong><a href="{{ url_for('register') }}" class="color-text">register for one here!</a></strong>
      </p>
      <p  class="center-align no-recipe-found"> or if you have an account 
        <strong><a href="{{ url_for('login') }}" class="color-text">log in in here</a></strong> and add to the database!</p>
    {% endif %}
  </div>
</section>
  {% endblock %}